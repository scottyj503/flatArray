Flat array using recursion and a factory function.
